/** @jsxImportSource @emotion/react */
import { css } from '@emotion/react'
import { useState, useEffect } from 'react'
import { useTheme } from 'next-themes'

// Sun icon for light mode
const SunIcon = () => (
  <svg width="18" height="18" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M7.5 0C7.77614 0 8 0.223858 8 0.5V2.5C8 2.77614 7.77614 3 7.5 3C7.22386 3 7 2.77614 7 2.5V0.5C7 0.223858 7.22386 0 7.5 0ZM2.1967 2.1967C2.39196 2.00144 2.70854 2.00144 2.90381 2.1967L4.31802 3.61091C4.51328 3.80617 4.51328 4.12276 4.31802 4.31802C4.12276 4.51328 3.80617 4.51328 3.61091 4.31802L2.1967 2.90381C2.00144 2.70854 2.00144 2.39196 2.1967 2.1967ZM0.5 7C0.223858 7 0 7.22386 0 7.5C0 7.77614 0.223858 8 0.5 8H2.5C2.77614 8 3 7.77614 3 7.5C3 7.22386 2.77614 7 2.5 7H0.5ZM2.1967 12.8033C2.00144 12.608 2.00144 12.2915 2.1967 12.0962L3.61091 10.682C3.80617 10.4867 4.12276 10.4867 4.31802 10.682C4.51328 10.8772 4.51328 11.1938 4.31802 11.3891L2.90381 12.8033C2.70854 12.9986 2.39196 12.9986 2.1967 12.8033ZM12.5 7C12.2239 7 12 7.22386 12 7.5C12 7.77614 12.2239 8 12.5 8H14.5C14.7761 8 15 7.77614 15 7.5C15 7.22386 14.7761 7 14.5 7H12.5ZM10.682 4.31802C10.4867 4.12276 10.4867 3.80617 10.682 3.61091L12.0962 2.1967C12.2915 2.00144 12.608 2.00144 12.8033 2.1967C12.9986 2.39196 12.9986 2.70854 12.8033 2.90381L11.3891 4.31802C11.1938 4.51328 10.8772 4.51328 10.682 4.31802ZM8 12.5C8 12.2239 7.77614 12 7.5 12C7.22386 12 7 12.2239 7 12.5V14.5C7 14.7761 7.22386 15 7.5 15C7.77614 15 8 14.7761 8 14.5V12.5ZM10.682 10.682C10.8772 10.4867 11.1938 10.4867 11.3891 10.682L12.8033 12.0962C12.9986 12.2915 12.9986 12.608 12.8033 12.8033C12.608 12.9986 12.2915 12.9986 12.0962 12.8033L10.682 11.3891C10.4867 11.1938 10.4867 10.8772 10.682 10.682ZM5.5 7.5C5.5 6.39543 6.39543 5.5 7.5 5.5C8.60457 5.5 9.5 6.39543 9.5 7.5C9.5 8.60457 8.60457 9.5 7.5 9.5C6.39543 9.5 5.5 8.60457 5.5 7.5ZM7.5 4.5C5.84315 4.5 4.5 5.84315 4.5 7.5C4.5 9.15685 5.84315 10.5 7.5 10.5C9.15685 10.5 10.5 9.15685 10.5 7.5C10.5 5.84315 9.15685 4.5 7.5 4.5Z" fill="currentColor" fillRule="evenodd" clipRule="evenodd" />
  </svg>
)

// Moon icon for dark mode
const MoonIcon = () => (
  <svg width="18" height="18" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.89998 0.499976C2.89998 0.279062 2.72089 0.0999756 2.49998 0.0999756C2.27906 0.0999756 2.09998 0.279062 2.09998 0.499976V1.09998H1.49998C1.27906 1.09998 1.09998 1.27906 1.09998 1.49998C1.09998 1.72089 1.27906 1.89998 1.49998 1.89998H2.09998V2.49998C2.09998 2.72089 2.27906 2.89998 2.49998 2.89998C2.72089 2.89998 2.89998 2.72089 2.89998 2.49998V1.89998H3.49998C3.72089 1.89998 3.89998 1.72089 3.89998 1.49998C3.89998 1.27906 3.72089 1.09998 3.49998 1.09998H2.89998V0.499976ZM5.89998 3.49998C5.89998 3.27906 5.72089 3.09998 5.49998 3.09998C5.27906 3.09998 5.09998 3.27906 5.09998 3.49998V4.09998H4.49998C4.27906 4.09998 4.09998 4.27906 4.09998 4.49998C4.09998 4.72089 4.27906 4.89998 4.49998 4.89998H5.09998V5.49998C5.09998 5.72089 5.27906 5.89998 5.49998 5.89998C5.72089 5.89998 5.89998 5.72089 5.89998 5.49998V4.89998H6.49998C6.72089 4.89998 6.89998 4.72089 6.89998 4.49998C6.89998 4.27906 6.72089 4.09998 6.49998 4.09998H5.89998V3.49998ZM1.89998 6.49998C1.89998 6.27906 1.72089 6.09998 1.49998 6.09998C1.27906 6.09998 1.09998 6.27906 1.09998 6.49998V7.09998H0.499976C0.279062 7.09998 0.0999756 7.27906 0.0999756 7.49998C0.0999756 7.72089 0.279062 7.89998 0.499976 7.89998H1.09998V8.49998C1.09998 8.72089 1.27906 8.89998 1.49998 8.89998C1.72089 8.89998 1.89998 8.72089 1.89998 8.49998V7.89998H2.49998C2.72089 7.89998 2.89998 7.72089 2.89998 7.49998C2.89998 7.27906 2.72089 7.09998 2.49998 7.09998H1.89998V6.49998ZM8.54406 0.982326C8.24708 0.941569 7.94518 0.923413 7.64568 0.928604C7.34578 0.933798 7.11598 1.18243 7.12118 1.48233C7.12638 1.78222 7.37501 2.01202 7.67491 2.00682C7.95476 2.00192 8.23424 2.01843 8.51044 2.05633C8.80773 2.09683 9.08196 1.89211 9.12246 1.59481C9.16296 1.29752 8.95824 1.02328 8.66094 0.982789L8.54406 0.982326ZM10.3955 1.92808C10.1513 1.77404 9.84192 1.85078 9.68788 2.09498C9.53384 2.33917 9.61058 2.64857 9.85477 2.80262C10.6423 3.30263 11.3163 3.97639 11.8177 4.76558C11.9718 5.00977 12.2812 5.08651 12.5254 4.93247C12.7696 4.77843 12.8463 4.46903 12.6923 4.22484C12.1076 3.3027 11.3196 2.51741 10.3955 1.92808ZM14.0713 7.63627C14.0692 7.33637 13.8396 7.08774 13.5397 7.08254C13.2398 7.07734 12.9912 7.30295 12.986 7.60285C12.9828 7.79003 12.9713 7.97719 12.9516 8.16398C12.917 8.4622 13.1275 8.73158 13.4257 8.76601C13.724 8.80044 13.9933 8.58993 14.0278 8.29171C14.0506 8.07486 14.0642 7.85688 14.0713 7.63627ZM13.4552 10.7063C13.7098 10.5647 13.8025 10.2447 13.6608 9.99008C13.5191 9.73549 13.1991 9.6428 12.9445 9.78447C12.4896 10.0415 12.0012 10.2435 11.4905 10.3856C11.2025 10.4657 11.0315 10.7651 11.1117 11.053C11.1919 11.341 11.4913 11.512 11.7792 11.4318C12.3811 11.2631 12.9561 11.024 13.4552 10.7063ZM9.06843 12.0905C9.30189 11.9365 9.37862 11.6271 9.22458 11.3929C9.07054 11.1587 8.76114 11.082 8.52694 11.236C8.14062 11.4912 7.71789 11.6911 7.27122 11.8296C6.97942 11.9198 6.81722 12.2247 6.90741 12.5165C6.99759 12.8083 7.30251 12.9705 7.59431 12.8803C8.1371 12.7116 8.64909 12.4664 9.06843 12.0905ZM5.04942 12.5821C5.35099 12.5696 5.59053 12.3236 5.578 12.022C5.56548 11.7204 5.31949 11.4808 5.01792 11.4934C4.63875 11.5093 4.25768 11.4869 3.88165 11.4268C3.58383 11.3791 3.30441 11.579 3.25673 11.8768C3.20904 12.1746 3.40893 12.454 3.70675 12.5017C4.14806 12.5718 4.59788 12.6002 5.04942 12.5821ZM2.49998 12.9C2.72089 12.9 2.89998 12.7209 2.89998 12.5C2.89998 12.2791 2.72089 12.1 2.49998 12.1C2.27906 12.1 2.09998 12.2791 2.09998 12.5C2.09998 12.7209 2.27906 12.9 2.49998 12.9Z" fill="currentColor" fillRule="evenodd" clipRule="evenodd" />
  </svg>
)

export default function ThemeToggle() {
  const { setTheme, resolvedTheme } = useTheme()
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    setMounted(true)
  }, [])

  if (!mounted) return null

  return (
    <button
      onClick={() => setTheme(resolvedTheme === 'dark' ? 'light' : 'dark')}
      aria-label={`Switch to ${resolvedTheme === 'dark' ? 'light' : 'dark'} mode`}
      css={css`
        color: var(--grey-2);
        cursor: pointer;
        transition: all 200ms ease;
        border: none;
        padding: 0;
        background: none;

        &:hover {
          color: var(--grey-3);
        }
      `}
    >
      {resolvedTheme === 'dark' ? <SunIcon /> : <MoonIcon />}
    </button>
  )
}
